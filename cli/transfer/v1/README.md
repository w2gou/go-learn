# Go-Transfer

ğŸš€ **Go-Transfer: äºŒç»´ç é©±åŠ¨çš„å±€åŸŸç½‘ä¸´æ—¶æ–‡ä»¶åˆ†äº«CLIå·¥å…·**

![Go Version](https://img.shields.io/badge/Go-1.21+-blue.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)
![Platform](https://img.shields.io/badge/Platform-Windows%7CLinux%7CmacOS-brightgreen.svg)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ é«˜æ€§èƒ½å¹¶å‘å¤„ç†
- **Goroutineé©±åŠ¨**: æ¯ä¸ªè¯·æ±‚ç‹¬ç«‹çš„Goroutineå¤„ç†ï¼Œæ”¯æŒé«˜å¹¶å‘
- **è¿æ¥æ± ç®¡ç†**: æ™ºèƒ½è¿æ¥æ•°é™åˆ¶ï¼Œé˜²æ­¢èµ„æºè€—å°½
- **æ€§èƒ½ç›‘æ§**: å®æ—¶ç»Ÿè®¡è¿æ¥æ•°ã€ä¼ è¾“é‡ã€ååé‡

### ğŸ“± æ™ºèƒ½äºŒç»´ç ç”Ÿæˆ
- **å¤šå°ºå¯¸æ”¯æŒ**: small/medium/large ä¸‰ç§äºŒç»´ç å¤§å°
- **ASCIIæ˜¾ç¤º**: ç»ˆç«¯åŸç”Ÿæ˜¾ç¤ºï¼Œæ— éœ€å¤–éƒ¨å·¥å…·
- **è‡ªåŠ¨ç½‘ç»œå‘ç°**: æ™ºèƒ½è·å–å±€åŸŸç½‘IPåœ°å€

### âš™ï¸ ä¸“ä¸šCLIä½“éªŒ
- **Cobraæ¡†æ¶**: ç°ä»£åŒ–çš„å‘½ä»¤è¡Œæ¥å£
- **Viperé…ç½®**: æ”¯æŒé…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡
- **ä¼˜é›…å…³é—­**: ä¿¡å·å¤„ç†å’Œèµ„æºæ¸…ç†

### ï¿½ï¸ ä¼ä¸šçº§å®‰å…¨
- **HTTPåŸºç¡€è®¤è¯**: å¯é€‰çš„ç”¨æˆ·å/å¯†ç ä¿æŠ¤
- **è®¿é—®æ§åˆ¶**: IPé™åˆ¶å’Œè¿æ¥æ•°æ§åˆ¶
- **å®‰å…¨ä¼ è¾“**: æ”¯æŒHTTPSï¼ˆå¯é…ç½®ï¼‰

### ğŸ“Š å¯è§‚æµ‹æ€§
- **ç»“æ„åŒ–æ—¥å¿—**: åŸºäºzapçš„é«˜æ€§èƒ½æ—¥å¿—ç³»ç»Ÿ
- **æ€§èƒ½æŒ‡æ ‡**: CPUã€å†…å­˜ã€ç½‘ç»œç»Ÿè®¡
- **å®æ—¶ç›‘æ§**: /api/stats å’Œ /api/health ç«¯ç‚¹

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **è¯­è¨€**: Go 1.21+
- **CLIæ¡†æ¶**: Cobra + Viper
- **HTTPæ¡†æ¶**: Gorilla Mux
- **æ—¥å¿—ç³»ç»Ÿ**: Uber Zap
- **äºŒç»´ç **: go-qrcode

### æ¶æ„è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Go-Transfer                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CLI Layer (Cobra + Viper)                         â”‚
â”‚  â”œâ”€â”€ serve      â”œâ”€â”€ config     â”œâ”€â”€ version         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Layer                                     â”‚
â”‚  â”œâ”€â”€ Server     â”œâ”€â”€ QR Code    â”œâ”€â”€ Network         â”‚
â”‚  â”œâ”€â”€ Config     â”œâ”€â”€ Auth       â”œâ”€â”€ Stats           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Infrastructure Layer                               â”‚
â”‚  â”œâ”€â”€ HTTP Server (Gorilla Mux)                     â”‚
â”‚  â”œâ”€â”€ Concurrent Handler (Goroutine Pool)           â”‚
â”‚  â”œâ”€â”€ Logging (Zap)                                 â”‚
â”‚  â”œâ”€â”€ Monitoring (Metrics)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¹¶å‘æ¨¡å‹
```go
// æ¯ä¸ªHTTPè¯·æ±‚çš„å¤„ç†æµç¨‹
Client Request â†’ Semaphore â†’ Goroutine Pool â†’ Handler
                    â†“              â†“           â†“
                 é™æµæ§åˆ¶      å¹¶å‘å¤„ç†      ä¸šåŠ¡é€»è¾‘
                    â†“              â†“           â†“
                 ç›‘æ§ç»Ÿè®¡      æ—¥å¿—è®°å½•      å“åº”è¿”å›
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…æ–¹å¼

#### æ–¹å¼1: æºç ç¼–è¯‘
```bash
git clone <repository-url>
cd Go-Transfer
make build
```

#### æ–¹å¼2: ä½¿ç”¨Makefileï¼ˆæ¨èï¼‰
```bash
# æ„å»ºå¼€å‘ç‰ˆæœ¬
make build

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ˆä¼˜åŒ–ï¼‰
make build-prod

# äº¤å‰ç¼–è¯‘æ‰€æœ‰å¹³å°
make dist
```

#### æ–¹å¼3: Goå®‰è£…
```bash
go install <repository-url>@latest
```

### åŸºæœ¬ä½¿ç”¨

#### ğŸ¯ å‘½ä»¤æ¦‚è§ˆ
```bash
# æŸ¥çœ‹å¸®åŠ©
go-transfer --help          # Linux/macOS
.\go-transfer.exe --help    # Windows PowerShell

# åˆ†äº«å•ä¸ªæ–‡ä»¶
go-transfer serve document.pdf          # Linux/macOS
.\go-transfer.exe serve document.pdf    # Windows PowerShell

# åˆ†äº«æ–‡ä»¶å¤¹ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰
go-transfer serve ./photos          # Linux/macOS  
.\go-transfer.exe serve ./photos    # Windows PowerShell

# é«˜çº§é€‰é¡¹
go-transfer serve --port 9000 --auth --verbose ./files          # Linux/macOS
.\go-transfer.exe serve --port 9000 --auth --verbose ./files    # Windows PowerShell
```

> **Windowsç”¨æˆ·æ³¨æ„**: PowerShellå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸ä¼šè‡ªåŠ¨ä»å½“å‰ç›®å½•æ‰§è¡Œç¨‹åºã€‚å¿…é¡»ä½¿ç”¨ `.\go-transfer.exe` æ ¼å¼ï¼Œæˆ–å°†ç¨‹åºå®‰è£…åˆ°ç³»ç»ŸPATHä¸­ã€‚è¯¦è§ [Windowsä½¿ç”¨æŒ‡å—](docs/WINDOWS_USAGE.md)ã€‚

#### ğŸ”§ é…ç½®é€‰é¡¹

**å‘½ä»¤è¡Œå‚æ•°**:
```bash
--port        æœåŠ¡å™¨ç«¯å£ (é»˜è®¤: 8080)
--auth        å¯ç”¨HTTPåŸºç¡€è®¤è¯
--username    è®¤è¯ç”¨æˆ·å (é»˜è®¤: admin)
--password    è®¤è¯å¯†ç  (ç©ºåˆ™éšæœºç”Ÿæˆ)
--verbose     è¯¦ç»†æ—¥å¿—è¾“å‡º
--no-qr       ç¦ç”¨äºŒç»´ç æ˜¾ç¤º
--max-connections  æœ€å¤§å¹¶å‘è¿æ¥æ•° (é»˜è®¤: 100)
```

**é…ç½®æ–‡ä»¶**: `~/.go-transfer.yaml`
```yaml
server:
  port: "8080"
  auth: false
  max_connections: 100
  timeout: "30s"

qr:
  disabled: false
  size: "medium"

logging:
  verbose: false
  format: "text"
```

## ğŸ“Š æ€§èƒ½ç‰¹æ€§

### å¹¶å‘èƒ½åŠ›
- **è¿æ¥æ± **: å¯é…ç½®æœ€å¤§å¹¶å‘è¿æ¥æ•°
- **Goroutineç®¡ç†**: é«˜æ•ˆçš„åç¨‹è°ƒåº¦
- **å†…å­˜ä¼˜åŒ–**: é›¶æ‹·è´æ–‡ä»¶ä¼ è¾“
- **è´Ÿè½½å‡è¡¡**: æ™ºèƒ½è¯·æ±‚åˆ†å‘

### æ€§èƒ½åŸºå‡†
```bash
# è¿è¡Œæ€§èƒ½æµ‹è¯•
make benchmark

# ç¤ºä¾‹ç»“æœ (ä»…ä¾›å‚è€ƒ)
BenchmarkServer_HandleRequest-8      5000   250ns/op   0 allocs/op
BenchmarkServer_ConcurrentConnections-8  1000  1.2Î¼s/op  48 B/op
```

### ç›‘æ§ç«¯ç‚¹
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/api/health

# æ€§èƒ½ç»Ÿè®¡
curl http://localhost:8080/api/stats
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
Go-Transfer/
â”œâ”€â”€ cmd/                    # CLIå‘½ä»¤å®šä¹‰
â”‚   â”œâ”€â”€ root.go            # æ ¹å‘½ä»¤å’Œå…¨å±€é…ç½®
â”‚   â””â”€â”€ serve.go           # serveå­å‘½ä»¤
â”œâ”€â”€ internal/              # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ network/          # ç½‘ç»œå·¥å…·
â”‚   â”œâ”€â”€ qr/              # äºŒç»´ç ç”Ÿæˆ
â”‚   â””â”€â”€ server/           # HTTPæœåŠ¡å™¨
â”œâ”€â”€ pkg/                  # å…¬å…±åŒ…
â”œâ”€â”€ tests/               # é›†æˆæµ‹è¯•
â”œâ”€â”€ configs/             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ Makefile            # æ„å»ºè„šæœ¬
â”œâ”€â”€ go.mod              # Goæ¨¡å—
â””â”€â”€ README.md           # é¡¹ç›®æ–‡æ¡£
```

### å¼€å‘å·¥ä½œæµ
```bash
# 1. å®‰è£…ä¾èµ–
make deps

# 2. ä»£ç æ ¼å¼åŒ–
make fmt

# 3. é™æ€æ£€æŸ¥
make vet lint

# 4. è¿è¡Œæµ‹è¯•
make test

# 5. æ€§èƒ½æµ‹è¯•
make benchmark

# 6. æ„å»ºå‘å¸ƒ
make release
```

### æµ‹è¯•è¦†ç›–ç‡
```bash
# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
make coverage

# æŸ¥çœ‹HTMLæŠ¥å‘Š
open coverage/coverage.html
```

## ğŸ”§ é«˜çº§ç‰¹æ€§

### 1. ä¼ä¸šçº§æ—¥å¿—ç³»ç»Ÿ
- **ç»“æ„åŒ–æ—¥å¿—**: JSONæ ¼å¼ï¼Œä¾¿äºæ—¥å¿—åˆ†æ
- **æ—¥å¿—çº§åˆ«**: Debug/Info/Warn/Error
- **æ€§èƒ½ä¼˜åŒ–**: é›¶åˆ†é…æ—¥å¿—è®°å½•

### 2. æ€§èƒ½ç›‘æ§
- **å®æ—¶ç»Ÿè®¡**: è¿æ¥æ•°ã€è¯·æ±‚æ•°ã€ä¼ è¾“å­—èŠ‚æ•°
- **ç³»ç»ŸæŒ‡æ ‡**: CPUä½¿ç”¨ç‡ã€å†…å­˜å ç”¨ã€Goroutineæ•°é‡
- **å®¢æˆ·ç«¯åˆ†æ**: IPç»Ÿè®¡ã€è®¿é—®çƒ­ç‚¹æ–‡ä»¶

### 3. å®‰å…¨ç‰¹æ€§
- **è®¤è¯ç³»ç»Ÿ**: å¯é€‰çš„HTTPåŸºç¡€è®¤è¯
- **è®¿é—®æ§åˆ¶**: åŸºäºIPçš„è®¿é—®é™åˆ¶
- **å®‰å…¨ä¼ è¾“**: æ”¯æŒHTTPSé…ç½®
- **é˜²æ”»å‡»**: è¯·æ±‚é¢‘ç‡é™åˆ¶

### 4. å¯æ‰©å±•æ€§
- **æ’ä»¶ç³»ç»Ÿ**: æ”¯æŒè‡ªå®šä¹‰ä¸­é—´ä»¶
- **é…ç½®çƒ­åŠ è½½**: è¿è¡Œæ—¶é…ç½®æ›´æ–°
- **å¤šå®ä¾‹éƒ¨ç½²**: è´Ÿè½½å‡è¡¡æ”¯æŒ

## ğŸŒ éƒ¨ç½²æ–¹æ¡ˆ

### 1. å•æœºéƒ¨ç½²
```bash
# ç›´æ¥è¿è¡Œ
./go-transfer serve --port 8080 ./files

# åå°è¿è¡Œ
nohup ./go-transfer serve ./files > transfer.log 2>&1 &
```

### 2. Dockeréƒ¨ç½²
```dockerfile
FROM alpine:latest
COPY go-transfer /usr/local/bin/
EXPOSE 8080
CMD ["go-transfer", "serve", "/data"]
```

### 3. ç³»ç»ŸæœåŠ¡
```bash
# åˆ›å»ºsystemdæœåŠ¡
sudo cp go-transfer.service /etc/systemd/system/
sudo systemctl enable go-transfer
sudo systemctl start go-transfer
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘ç¯å¢ƒ
1. Go 1.21+
2. Makeå·¥å…·
3. Gitç‰ˆæœ¬æ§åˆ¶

### è´¡çŒ®æµç¨‹
1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç æ›´æ”¹
4. æ·»åŠ æµ‹è¯•ç”¨ä¾‹
5. æäº¤Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ªGoå®˜æ–¹ç¼–ç è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ > 80%
- é€šè¿‡æ‰€æœ‰é™æ€æ£€æŸ¥

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

## ğŸ‰ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„è´¡çŒ®ï¼š
- [Cobra](https://github.com/spf13/cobra) - ç°ä»£åŒ–CLIæ¡†æ¶
- [Viper](https://github.com/spf13/viper) - é…ç½®ç®¡ç†
- [Gorilla Mux](https://github.com/gorilla/mux) - HTTPè·¯ç”±
- [Zap](https://github.com/uber-go/zap) - é«˜æ€§èƒ½æ—¥å¿—
- [go-qrcode](https://github.com/skip2/go-qrcode) - äºŒç»´ç ç”Ÿæˆ

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼**